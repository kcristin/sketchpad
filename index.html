<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <title>ETCH-A-SKETCH</title>
    <style>
        div.content {
            text-align: center;
        }
    </style>
</head>

<body>
    <br>
    <div class="content">
    </div>

    <script>

        const ROW_LENGTH = 500;
        let gridLength = prompt('How long?');
        const content = document.querySelector('.content');

        let idArray = [];
        let padSize = gridLength * gridLength;
    
        for (let i = 1; i <= padSize; i++) {
            idArray[i - 1] = i.toString();
        }
        idArray.reverse();

        let createChildDiv = () => {
            let block = document.createElement('div');
            block.className = "block";
            block.id = `block_${idArray.pop()}`;
            block.style.cssText = `background-color: blue; display: inline-grid; width: ${ROW_LENGTH/gridLength}px; height: ${ROW_LENGTH/gridLength}px;`;

            addEvent(block);
            return block;
        }

        let addEvent = (block) => {
            let count = 1;
            let opacity = 0.1;
            block.addEventListener('mouseenter', () => {
                count++;
                console.log(count);
                block.style.backgroundColor = `rgba(255,255,0, ${(opacity * count)})`;
            })
        }

        let createParentDiv = (index) => {

            let blockRow = document.createElement('div');
            blockRow.className = "row";
            blockRow.id = `row_${index}`;
            blockRow.style.cssText = `height: ${ROW_LENGTH/gridLength}px`;

            for (let k = 1; k <= gridLength; k++) {
                let block = createChildDiv();
                blockRow.appendChild(block);
            }
            content.appendChild(blockRow);
        }

        for (let j = 1; j <= gridLength; j++) {
            createParentDiv(j);
        }

    </script>
</body>
</html>